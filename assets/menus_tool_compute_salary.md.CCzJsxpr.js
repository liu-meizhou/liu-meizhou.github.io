import{$ as G}from"./chunks/theme.DEm_s0nE.js";import{E as V,a as f,b as J}from"./chunks/index.Ba-9EPnQ.js";import{E as v,a as d,b as h}from"./chunks/index.D2818mJk.js";import{E as U}from"./chunks/index.BKRjv3MI.js";import{a2 as R,p as F,c as b,e as p,H as l,q as i,i as r,s as t,f as m,t as C,h as M,j as x,F as K}from"./chunks/framework.C-01xEl2.js";const L={key:1},Q={key:1},W={style:{display:"flex"}},X={__name:"salary",setup(N){const o=R({month:[{start:1,end:12,value:10}],providentFund:5,isHousingAllowance:!1,isHasProvidentFund:!1,year:0});G.Get("permission").then(a=>{a==="jiahe"&&(o.month=[{start:1,end:4,value:20},{start:5,end:5,value:22.28},{start:6,end:12,value:22.5551}],o.providentFund=10)});const u=(a,e=5)=>Number(a.toFixed(e)),P=a=>{const e=o.month.find(n=>n.start<=a&&n.end>=a);return e?e.value:0},k=F(()=>{const a={};return o.month.forEach(e=>{const n={oldMoney:u(e.value*.08),providentFundMoney:u(e.value*o.providentFund*.01),unemploymentMoney:u(e.value*.002),medicalMoney:u(e.value*.02)};a[e.value]={...n,all:u(Object.values(n).reduce((s,y)=>s+Number(y),0))}}),a}),A=a=>{const n=[{money:960,tax:.45,extraMoney:181.92},{money:660,tax:.35,extraMoney:85.92},{money:420,tax:.3,extraMoney:52.92},{money:300,tax:.25,extraMoney:31.92},{money:144,tax:.2,extraMoney:16.92},{money:36,tax:.1,extraMoney:2.52},{money:0,tax:.03,extraMoney:0}].find(s=>a>=s.money);return u(a*n.tax-n.extraMoney)},g=F(()=>{const a=[];for(let e=1;e<=12;e++){const n=a[e-2]||{},s=P(e),y=e===7?k.value[s]:n.moneyInfo||k.value[s],E=(n.allMoney||0)+s,_=u((n.allFundMoney||0)+y.all),q=o.isHousingAllowance?5+1.5:5,$=Math.max(u(E-_-q*e),0),H=A($),T=u(n.allShouldTax||0),I=u(H-T),S=u(s-I-y.all+(o.isHasProvidentFund?y.providentFundMoney*2:0));a.push({month:`${e}月`,money:s,moneyInfo:y,allMoney:E,allFundMoney:_,allShouldMoney:$,allShouldTax:H,allAlreadyTax:T,needTax:I,hasMoney:S,allHasMoney:u((n.allHasMoney||0)+S)})}return a}),B=F(()=>o.month.map(a=>({money:a.value,...k.value[a.value]}))),j=(a,e)=>{e.startMonth=parseInt(e.startMonth),e.endMonth=parseInt(e.endMonth),e.endMonth<e.startMonth?e.endMonth=e.startMonth:e.endMonth>12&&(e.endMonth=12);const n=o.month[a+1];n&&(n.startMonth=parseInt(n.start),n.endMonth=parseInt(n.end),e.endMonth>=n.endMonth&&(e.endMonth=n.endMonth-1),n.startMonth=e.endMonth+1)},z=(a,e)=>{e.startMonth=e.start,e.endMonth=e.end,e.salary=e.value,e.edit=!0},D=(a,e)=>{const n=o.month[a-1];if(n)n.end=e.end;else{const s=o.month[a+1];s&&(s.start=e.start)}o.month.splice(a,1)},w=(a,e)=>{e.start=parseInt(e.startMonth),e.end=parseInt(e.endMonth),e.value=u(e.salary,3);const n=o.month[a+1];n?n.start=n.startMonth:e.end<12&&o.month.push({start:e.end+1,end:12,value:e.value}),e.edit=!1},O=(a,e)=>{e.edit=!1};return(a,e)=>(p(),b(K,null,[l(t(J),{model:o,"label-position":"left","label-width":"90px"},{default:r(()=>[l(t(V),{label:"月薪"},{default:r(()=>[l(t(v),{data:o.month,style:{width:"100%"}},{default:r(()=>[l(t(d),{prop:"start",label:"月份起始"},{default:r(n=>[m(C(n.row.start),1)]),_:1}),l(t(d),{prop:"end",label:"月份终止"},{default:r(n=>[n.row.edit?(p(),M(t(f),{key:0,modelValue:n.row.endMonth,"onUpdate:modelValue":s=>n.row.endMonth=s,onChange:s=>j(n.$index,n.row),type:"number"},null,8,["modelValue","onUpdate:modelValue","onChange"])):(p(),b("span",L,C(n.row.end),1))]),_:1}),l(t(d),{prop:"value",label:"月薪"},{default:r(n=>[n.row.edit?(p(),M(t(f),{key:0,modelValue:n.row.salary,"onUpdate:modelValue":s=>n.row.salary=s,type:"number"},null,8,["modelValue","onUpdate:modelValue"])):(p(),b("span",Q,C(n.row.value),1))]),_:1}),l(t(d),{label:"操作",width:"160"},{default:r(n=>[i("div",W,[n.row.edit?x("",!0):(p(),M(t(h),{key:0,size:"mini",onClick:s=>z(n.$index,n.row)},{default:r(()=>e[4]||(e[4]=[m("编辑",-1)])),_:2,__:[4]},1032,["onClick"])),n.row.edit?x("",!0):(p(),M(t(h),{key:1,size:"mini",type:"danger",onClick:s=>D(n.$index,n.row)},{default:r(()=>e[5]||(e[5]=[m("删除",-1)])),_:2,__:[5]},1032,["onClick"])),n.row.edit?(p(),M(t(h),{key:2,size:"mini",type:"success",onClick:s=>w(n.$index,n.row)},{default:r(()=>e[6]||(e[6]=[m("保存",-1)])),_:2,__:[6]},1032,["onClick"])):x("",!0),n.row.edit?(p(),M(t(h),{key:3,size:"mini",type:"danger",onClick:s=>O(n.$index,n.row)},{default:r(()=>e[7]||(e[7]=[m("取消",-1)])),_:2,__:[7]},1032,["onClick"])):x("",!0)])]),_:1})]),_:1},8,["data"])]),_:1}),l(t(V),{label:"公积金比例"},{default:r(()=>[l(t(f),{modelValue:o.providentFund,"onUpdate:modelValue":e[0]||(e[0]=n=>o.providentFund=n),type:"number"},{append:r(()=>e[8]||(e[8]=[m("%",-1)])),_:1},8,["modelValue"])]),_:1}),l(t(V),{label:"年终奖"},{default:r(()=>[l(t(f),{modelValue:o.year,"onUpdate:modelValue":e[1]||(e[1]=n=>o.year=n),type:"number"},{append:r(()=>e[9]||(e[9]=[m("k",-1)])),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),e[17]||(e[17]=i("ul",null,[i("li",null,"每月五险一金计算")],-1)),l(t(v),{data:B.value,stripe:"",border:""},{default:r(()=>[l(t(d),{prop:"money",label:"收入(k)",width:"80px"}),l(t(d),{prop:"providentFundMoney",label:"公积金(k)"}),l(t(d),{prop:"oldMoney",label:"养老(k)"}),l(t(d),{prop:"medicalMoney",label:"医保(k)"}),l(t(d),{prop:"unemploymentMoney",label:"失业保险(k)"}),l(t(d),{prop:"all",label:"专项总扣除(k)"})]),_:1},8,["data"]),i("ul",null,[e[13]||(e[13]=i("li",null,"每月缴税计算",-1)),e[14]||(e[14]=i("li",null,[m("每月"),i("code",null,"5k"),m("免税额度")],-1)),i("li",null,[e[10]||(e[10]=m("每月",-1)),e[11]||(e[11]=i("code",null,"1.5k",-1)),e[12]||(e[12]=m("住房免税",-1)),l(t(U),{modelValue:o.isHousingAllowance,"onUpdate:modelValue":e[2]||(e[2]=n=>o.isHousingAllowance=n)},null,8,["modelValue"])])]),l(t(v),{data:g.value,stripe:"",border:""},{default:r(()=>[l(t(d),{prop:"month",label:"月份",width:"66px"}),l(t(d),{prop:"allMoney",label:"总收入(k)"}),l(t(d),{prop:"allFundMoney",label:"总扣除(k)"}),l(t(d),{prop:"allShouldMoney",label:"总应缴(k)"}),l(t(d),{prop:"allShouldTax",label:"总应缴税(k)"}),l(t(d),{prop:"allAlreadyTax",label:"总已缴(k)"}),l(t(d),{prop:"needTax",label:"需缴(k)"})]),_:1},8,["data"]),i("ul",null,[e[16]||(e[16]=i("li",null,"每月收入计算",-1)),i("li",null,[e[15]||(e[15]=m("是否提现公积金：",-1)),l(t(U),{modelValue:o.isHasProvidentFund,"onUpdate:modelValue":e[3]||(e[3]=n=>o.isHasProvidentFund=n)},null,8,["modelValue"])])]),l(t(v),{data:g.value,stripe:"",border:""},{default:r(()=>[l(t(d),{prop:"month",label:"月份",width:"66px"}),l(t(d),{prop:"money",label:"收入(k)"}),l(t(d),{prop:"needTax",label:"需缴(k)"}),l(t(d),{prop:"hasMoney",label:"到手(k)"}),l(t(d),{prop:"allHasMoney",label:"总到手(k)"})]),_:1},8,["data"])],64))}},le=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"menus/tool/compute/salary.md","filePath":"menus/tool/compute/salary.md","lastUpdated":1708939620000}'),Y={name:"menus/tool/compute/salary.md"},ae=Object.assign(Y,{setup(N){return(o,u)=>(p(),b("div",null,[u[0]||(u[0]=i("h2",{id:"薪资计算",tabindex:"-1"},[m("薪资计算 "),i("a",{class:"header-anchor",href:"#薪资计算","aria-label":'Permalink to "薪资计算"'},"​")],-1)),l(X)]))}});export{le as __pageData,ae as default};
