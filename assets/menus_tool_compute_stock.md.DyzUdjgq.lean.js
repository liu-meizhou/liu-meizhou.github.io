import{E as i,a as d,b as j}from"./chunks/index.Ba-9EPnQ.js";import{b as R,a as p,E as I}from"./chunks/index.D2818mJk.js";import{a2 as q,r as H,w as J,a as z,c as $,e as B,H as o,i as a,s as t,f as c,t as F,q as S,F as A}from"./chunks/framework.C-01xEl2.js";const U=4,G={__name:"stock",setup(D){const e=q({n:5,now:0,coin:"SUI",x:10,amplitude:2,price:5,income:1,buyPoint:0,pricePoint:4,fees:.02}),w=H([]),s=(r,l=2)=>{const n=Math.pow(10,l);return Math.ceil(r*n)/n},f=(r,l=2)=>{const n=Math.pow(10,l);return Math.floor(r*n)/n},v=(r,l=2)=>{const n=Math.pow(10,l);return Math.round(r*n)/n},N=({row:r,rowIndex:l})=>{if(l===e.now)return{"background-color":"cornflowerblue"}};return J(e,((r,l)=>{let n;return(...m)=>{clearTimeout(n),n=setTimeout(()=>{r.apply(this,m)},l)}})(()=>{e.n=s(e.n,0),e.now=v(e.now,0),e.buyPoint=s(e.buyPoint,0),e.pricePoint=s(e.pricePoint,0),e.x=s(e.x,e.buyPoint),e.price=f(e.price,e.pricePoint),e.amplitude=s(e.amplitude);const r=e.amplitude*.01,l=e.fees*.01;e.income=r*e.x;{const b=new URLSearchParams(e);window.history.replaceState({},"",`${window.location.pathname}?${b.toString()}`)}const{n,x:m}=e,_=s(e.price*(1+r),e.pricePoint),g=s(m*e.price*l,U),M=s(m*_*l,U),k=[{n:1,all:m,allPrice:e.price,finalPrice:e.price,final:m,buyFees:g,loss:g,downLoss:s(m*r*e.price),sellPrice:_,sellFees:M,risingProfit:f(m*r*e.price-g-M)}];for(let b=1;b<n;b++){const u=k[b-1],P=u.finalPrice*(1-r),y=P*(1+r),T=u.loss+u.downLoss,O=(b===1?1:2)*(u.buyFees+u.sellFees),V=f((e.income*e.price+T+O)/(y-P)-u.all,e.buyPoint),x=v(u.all+V,e.buyPoint),L=s((u.allPrice*u.all+V*P)/(u.all+V),e.pricePoint),E=s(V*P*l,U),C=s(x*y*l,U);k[b]={n:b+1,all:x,allPrice:L,final:V,finalPrice:f(P,e.pricePoint),buyFees:E,loss:s(T+E,e.pricePoint),downLoss:s(x*r*P,e.pricePoint),sellPrice:f(y,e.pricePoint),sellFees:C,risingProfit:f(x*(y-L)-E-C,e.pricePoint)}}w.value=k},2e3),{deep:!0,immediate:!0}),z(()=>{{const r=new URLSearchParams(window.location.search);Object.assign(e,Object.fromEntries(r))}}),(r,l)=>(B(),$(A,null,[o(t(j),{model:e,"label-position":"left","label-width":"120px"},{default:a(()=>[o(t(i),{label:"投入币种"},{default:a(()=>[o(t(d),{modelValue:e.coin,"onUpdate:modelValue":l[0]||(l[0]=n=>e.coin=n)},null,8,["modelValue"])]),_:1}),o(t(i),{label:"币种单价"},{default:a(()=>[o(t(d),{modelValue:e.price,"onUpdate:modelValue":l[1]||(l[1]=n=>e.price=n),type:"number"},{append:a(()=>l[11]||(l[11]=[c("USDT",-1)])),_:1},8,["modelValue"])]),_:1}),o(t(i),{label:"周期次数"},{default:a(()=>[o(t(d),{modelValue:e.n,"onUpdate:modelValue":l[2]||(l[2]=n=>e.n=n),type:"number"},{append:a(()=>l[12]||(l[12]=[c("次",-1)])),_:1},8,["modelValue"])]),_:1}),o(t(i),{label:"单次投入金额"},{default:a(()=>[o(t(d),{modelValue:e.x,"onUpdate:modelValue":l[3]||(l[3]=n=>e.x=n),type:"number"},{append:a(()=>[c(F(e.coin),1)]),_:1},8,["modelValue"])]),_:1}),o(t(i),{label:"跌涨幅度"},{default:a(()=>[o(t(d),{modelValue:e.amplitude,"onUpdate:modelValue":l[4]||(l[4]=n=>e.amplitude=n),type:"number"},{append:a(()=>l[13]||(l[13]=[c("%",-1)])),_:1},8,["modelValue"])]),_:1}),o(t(i),{label:"最低买入小数点"},{default:a(()=>[o(t(d),{modelValue:e.buyPoint,"onUpdate:modelValue":l[5]||(l[5]=n=>e.buyPoint=n),type:"number"},null,8,["modelValue"])]),_:1}),o(t(i),{label:"价格小数点"},{default:a(()=>[o(t(d),{modelValue:e.pricePoint,"onUpdate:modelValue":l[6]||(l[6]=n=>e.pricePoint=n),type:"number"},null,8,["modelValue"])]),_:1}),o(t(i),{label:"买卖手续费"},{default:a(()=>[o(t(d),{modelValue:e.fees,"onUpdate:modelValue":l[7]||(l[7]=n=>e.fees=n),type:"number"},{append:a(()=>l[14]||(l[14]=[c("%",-1)])),_:1},8,["modelValue"])]),_:1}),o(t(i),{label:"收益"},{default:a(()=>[S("span",null,F(e.income)+" "+F(e.coin)+" = "+F(f(e.income*e.price))+" USDT ",1)]),_:1}),o(t(i),{label:"当前周期"},{default:a(()=>[o(t(d),{modelValue:e.now,"onUpdate:modelValue":l[8]||(l[8]=n=>e.now=n),type:"number"},null,8,["modelValue"])]),_:1}),o(t(i),{label:"周期操作"},{default:a(()=>[o(t(R),{onClick:l[9]||(l[9]=n=>e.now++)},{default:a(()=>l[15]||(l[15]=[c("下一期",-1)])),_:1,__:[15]}),o(t(R),{onClick:l[10]||(l[10]=n=>e.now=0)},{default:a(()=>l[16]||(l[16]=[c("重置",-1)])),_:1,__:[16]})]),_:1})]),_:1},8,["model"]),o(t(I),{ref:"table",data:w.value,border:"","row-style":N},{default:a(()=>[o(t(p),{prop:"n",label:"周期"}),o(t(p),{prop:"final",label:"买入量"}),o(t(p),{prop:"finalPrice",label:"买入价"}),o(t(p),{prop:"all",label:"持有量"}),o(t(p),{prop:"allPrice",label:"持有均价"}),o(t(p),{prop:"sellPrice",label:"卖出价"}),o(t(p),{prop:"loss",label:"已亏损"}),o(t(p),{prop:"downLoss",label:"下跌亏损"}),o(t(p),{prop:"buyFees",label:"买手续费"}),o(t(p),{prop:"sellFees",label:"卖手续费"}),o(t(p),{prop:"risingProfit",label:"上涨盈利"})]),_:1},8,["data"])],64))}},Z=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"menus/tool/compute/stock.md","filePath":"menus/tool/compute/stock.md","lastUpdated":1727083655000}'),K={name:"menus/tool/compute/stock.md"},h=Object.assign(K,{setup(D){return(e,w)=>(B(),$("div",null,[w[0]||(w[0]=S("h2",{id:"股票必胜计算",tabindex:"-1"},[c("股票必胜计算 "),S("a",{class:"header-anchor",href:"#股票必胜计算","aria-label":'Permalink to "股票必胜计算"'},"​")],-1)),o(G)]))}});export{Z as __pageData,h as default};
